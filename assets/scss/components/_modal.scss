/* Modal (theme-aware) */
.modal {
  /* âœ¨ ëª¨ë‹¬ ì „ìš© ë³€ìˆ˜: í…Œë§ˆë³„ë¡œ í‘œë©´/ì „ê²½/ì˜¤ë²„ë ˆì´ ì œì–´ */
  --modal-surface: var(--color-white);
  --modal-foreground: var(--color-darken);
  --modal-overlay: rgba(0, 0, 0, .45);

  position: fixed;
  inset: 0;
  z-index: 1000;
  display: none; /* aria-hidden="true"ì¼ ë•Œ ìˆ¨ê¹€ */

  &[aria-hidden="false"] { display: block; }

  .modal-overlay {
    position: absolute;
    inset: 0;
    background: var(--modal-overlay);
    backdrop-filter: blur(2px); /* ì–´ë‘  ì†ì—ì„œë„ ë ˆì´ì–´ ë¶„ë¦¬ê° */
  }

  .modal-container {
    position: relative;
    width: min(720px, calc(100% - 32px));
    max-height: calc(100dvh - 80px);
    margin: 40px auto;
    display: flex;
    flex-direction: column;
    background: var(--modal-surface);
    //color: var(--modal-foreground); /* âœ… í…Œë§ˆ ì „ê²½ìƒ‰ ì‚¬ìš© */
    color: var(--color-darken);
    border: 1px solid var(--border-darken);
    border-radius: 12px;
    box-shadow: 0 12px 36px rgba(0, 0, 0, .18);
    outline: none;
    transform: translateY(16px);
    opacity: 0;
    transition: transform .2s ease, opacity .2s ease;
  }

  &[aria-hidden="false"] .modal-container {
    transform: translateY(0);
    opacity: 1;
  }

  .modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid var(--gray-500);

    .modal-title {
      font-size: 18px;
      font-weight: 700;
      //color: inherit; /* ì „ê²½ìƒ‰ ìƒì† */
      color: var(--color-darken);
    }

    .modal-close {
      width: 32px;
      height: 32px;
      border: 0;
      background: transparent;
      cursor: pointer;
      border-radius: 8px;
      position: relative;
      //color: var(--modal-foreground); /* ì•„ì´ì½˜ ìƒ‰ ê¸°ì¤€ */
      color: var(--color-darken);
      border: 1px solid var(--color-darken);

      &::before,
      &::after {
        content: "";
        position: absolute;
        left: 50%;
        top: 50%;
        width: 18px;
        height: 2px;
        background: currentColor; /* í…Œë§ˆì— ë”°ë¼ ìë™ ì ì‘ */
        transform-origin: 50% 50%;
      }
      &::before { transform: translate(-50%, -50%) rotate(45deg); }
      &::after  { transform: translate(-50%, -50%) rotate(-45deg); }

      &:hover { background: var(--gray-200); }
      &:focus-visible { outline: 2px solid rgba(var(--color-primary-rgb), .4); outline-offset: 2px; }
    }
  }

  .modal-body {
    padding: 20px;
    overflow: auto;
    color: inherit; /* âœ… ì „ê²½ìƒ‰ ìƒì† */
    .table { min-width: 100%; }
  }

  .modal-footer {
    padding: 12px 20px;
    border-top: 1px solid var(--gray-500);
    display: flex;
    gap: 8px;
    justify-content: flex-end;
  }

  /* ì‚¬ì´ì¦ˆ ë³€í˜• */
  &-sm .modal-container { width: min(420px, calc(100% - 32px)); }
  &-lg .modal-container { width: min(1000px, calc(100% - 32px)); }

  /* ë“œë¡œì–´í˜• (ì˜¤ë¥¸ìª½ ìŠ¬ë¼ì´ë“œ) */
  &-drawer {
    .modal-container {
      margin: 0 0 0 auto;
      height: 100dvh;
      width: min(480px, 100%);
      border-radius: 0;
      transform: translateX(24px);
      opacity: 1;
    }
    &[aria-hidden="false"] .modal-container { transform: translateX(0); }
  }

  .box-wrap {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 24px;
    .box {
      width: 100%;
      min-width: 0;
      .flex * { min-width: 0; }
      &.col2 { grid-column: span 2; }
      &.col3 { grid-column: span 3; }
      &.col4 { grid-column: span 4; }
    }
  }
}

/* ë°”ë”” ìŠ¤í¬ë¡¤ ì ê¸ˆ */
.body-lock { overflow: hidden; }

/* ğŸŒ™ ë‹¤í¬ í…Œë§ˆ ì „ìš© ì˜¤ë²„ë¼ì´ë“œ */
:root {
  /* í´ë°±: color-mix ë¯¸ì§€ì› ì‹œ ì‚¬ìš©ë  ì•½ê°„ ì–´ë‘ìš´ í‘œë©´ìƒ‰ */
  --modal-surface-dark-fallback: #f2f2f5;
}

/* ìµœì‹  ë¸Œë¼ìš°ì €: color-mix ì‚¬ìš© (OKLab ì¶”ì²œ) */
@supports (color: color-mix(in oklab, white, black)) {
  :root {
    --modal-surface-dark: color-mix(in oklab, var(--color-white), black 16%);
  }
}

/* ë‹¤í¬ í…Œë§ˆ
   - í‘œë©´ì€ í™”ì´íŠ¸ë¥¼ 16% ë¸”ë™ìœ¼ë¡œ í†¤ë‹¤ìš´
   - ì „ê²½ì€ ì§„í•œ #121212
   - ì˜¤ë²„ë ˆì´ëŠ” ì¡°ê¸ˆ ë” ì§„í•˜ê²Œ */
[data-theme="dark"] .modal {
  --modal-surface: var(--modal-surface-dark, var(--modal-surface-dark-fallback));
  --modal-foreground: #121212;
  --modal-overlay: rgba(0, 0, 0, .6);
}

/* ë‹¤í¬ í…Œë§ˆ ë””í…Œì¼ íŠœë‹: ë³´ë”/í˜¸ë²„ ëŒ€ë¹„ ê³¼í•˜ì§€ ì•Šê²Œ */
[data-theme="dark"] .modal .modal-container {
  border-color: color-mix(in oklab, var(--border-darken), white 28%);
}
[data-theme="dark"] .modal .modal-header,
[data-theme="dark"] .modal .modal-footer {
  border-color: color-mix(in oklab, var(--gray-500), white 30%);
}
[data-theme="dark"] .modal .modal-header .modal-close:hover {
  background: color-mix(in oklab, var(--gray-200), black 12%);
}
